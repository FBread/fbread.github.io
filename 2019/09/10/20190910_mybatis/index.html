<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>MyBatis | é¢åŒ…åœŸè±†è¥¿çº¢æŸ¿</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="MyBatis,PageHelper">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis">
<meta property="og:url" content="https://fbread.github.io/2019/09/10/20190910_mybatis/index.html">
<meta property="og:site_name" content="é¢åŒ…åœŸè±†è¥¿çº¢æŸ¿">
<meta property="og:description" content="MyBatis,PageHelper">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-09-09T18:16:34.000Z">
<meta property="article:modified_time" content="2024-05-29T07:45:35.747Z">
<meta property="article:author" content="Ziyi Jiang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="é¢åŒ…åœŸè±†è¥¿çº¢æŸ¿" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">é¢åŒ…åœŸè±†è¥¿çº¢æŸ¿</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://fbread.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-20190910_mybatis" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/09/10/20190910_mybatis/" class="article-date">
  <time class="dt-published" datetime="2019-09-09T18:16:34.000Z" itemprop="datePublished">2019-09-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      MyBatis
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h2><p>Object Relational Mapping å¯¹è±¡å…³ç³»æ˜ å°„</p>
<p>åŸç†:æŠŠJavaä¸­çš„å¯¹è±¡(çš„å±æ€§)å’Œæ•°æ®åº“ä¸­çš„è¡¨(åˆ—)è¿›è¡Œå…³è”æ˜ å°„,ç®€åŒ–äº†JDBCçš„å¢åˆ æ”¹æŸ¥æ“ä½œ</p>
<p>ä¸»æµçš„ORMæ¡†æ¶: MyBatis Hibernate</p>
<p>å®ä½“ç±»ä¸SQLè¯­å¥ä¹‹é—´å»ºç«‹æ˜ å°„å…³ç³»</p>
<h2 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h2><p>æ˜¯Apacheä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®,å‰èº«æ˜¯ibatis<br>,æ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨åŒ–çš„ORMçš„æ¡†æ¶,åŸºäºSQL,ç®€å•æ˜“å­¦</p>
<h2 id="MyBatis-çš„æ­å»º"><a href="#MyBatis-çš„æ­å»º" class="headerlink" title="MyBatis çš„æ­å»º"></a>MyBatis çš„æ­å»º</h2><ol>
<li><p>æ–°å»ºåŠ¨æ€webé¡¹ç›®,å¯¼å…¥jaråŒ…</p>
</li>
<li><p>åœ¨é¡¹ç›®ä¸‹æ–°å»ºèµ„æºç›®å½•resource,åˆ›å»ºdb.propertiesæ–‡ä»¶</p>
</li>
<li><p>åœ¨resourceä¸‹åˆ›å»ºmybatisçš„xmlé…ç½®æ–‡ä»¶,</p>
<ul>
<li>mybatis-3-config.dtd<br>dtdæ–‡æ¡£ç±»å‹å£°æ˜:è§„å®šäº†mybatisçš„é…ç½®æ–‡ä»¶,é‡Œé¢å¿…é¡»åŒ…å«å“ªäº›æ ‡ç­¾,æ ‡ç­¾å¿…é¡»æœ‰å“ªäº›å±æ€§.</li>
</ul>
</li>
<li><p>å°è£…mybatisæ“ä½œæ•°æ®åº“çš„å·¥å…·ç±»</p>
<p>mybatisçš„å·¥ä½œåŸç†:</p>
<ol>
<li><p>é€šè¿‡mybatiså°è£…çš„æµè¯»å–mybatisçš„é…ç½®æ–‡ä»¶</p>
</li>
<li><p>åˆ›å»ºSQLSessionFactoryBuilderå¯¹è±¡</p>
<ul>
<li><p>ç”Ÿå‘½å‘¨æœŸ:å±€éƒ¨å˜é‡çº§åˆ«</p>
</li>
<li><p>ä½œç”¨:åˆ›å»ºSQLSessionFactory</p>
</li>
</ul>
</li>
<li><p>é€šè¿‡æ­¥éª¤2å¾—åˆ°SQLSessionFactory</p>
<ul>
<li><p>ç”Ÿå‘½å‘¨æœŸ:å’Œç¨‹åºä¸€è‡´,åªè¦ç¨‹åºè¿è¡ŒSQLSessionFactoryå°±å­˜åœ¨</p>
</li>
<li><p>ä½œç”¨:åˆ›å»ºè®¿é—®æ•°æ®åº“çš„session</p>
</li>
</ul>
</li>
<li><p>é€šè¿‡SQLSessionFactoryå¾—åˆ°sessionå¯¹è±¡</p>
<ul>
<li>ä½œç”¨:é€šè¿‡sessionæ¥å®Œæˆæ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥æ“ä½œ</li>
<li>ç”Ÿå‘½å‘¨æœŸ:å½“sessionçš„å…³é—­æ–¹æ³•è°ƒç”¨å,sessionæ¶ˆå¤±.</li>
<li>[è¯´æ˜]åœ¨sessionå…³é—­ä¹‹å‰å¯ä»¥è¿›è¡Œå¤šæ¬¡SQLæ“ä½œ,sessionæ˜¯çº¿ç¨‹çº§åˆ«</li>
</ul>
</li>
<li><p>åˆ›å»ºå®ä½“ç±»</p>
<ul>
<li>åˆ«åæ³¨è§£ å±æ€§åæœ€å¥½å’Œåˆ—åä¸€è‡´</li>
</ul>
</li>
<li><p>ç¼–å†™dao</p>
<ol>
<li><p>mybatisåŸºäºæ¥å£ç¼–ç¨‹</p>
</li>
<li><p>mybatisåŸºäºSQL</p>
<p>ç¼–å†™å®ä½“ç±»å’Œè¡¨æ˜ å°„çš„æ–‡ä»¶</p>
<p>åœ¨æ˜ å°„æ–‡ä»¶ä¸­,é€šè¿‡namespaceæŠŠæ˜ å°„æ–‡ä»¶å’Œæ¥å£å…³è”</p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</code></pre></td>
<td class="code"><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

<p>&lt;mapper namespace&#x3D;&quot;cn.test.dao.UserDao&quot;&gt;<br>    &lt;!â€“  æ¥å£ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•,åœ¨æ­¤æ˜ å°„æ–¹æ³•ä¸­éƒ½è¦æœ‰ä¸ä¹‹å…³è”çš„SQLè¯­å¥  â€“&gt;<br>    &lt;!â€“    id:å¯¹åº”æ¥å£ä¸­çš„æ–¹æ³•å<br>            parameterType:æ–¹æ³•çš„å‚æ•°ç±»å‹<br>            å¯¹åº”insert update deleteçš„è¿”å›å€¼é»˜è®¤æ˜¯intç±»å‹,æ— éœ€è®¾ç½®<br>      â€“&gt;<br>    &lt;insert id&#x3D;&quot;addUser&quot; parameterType&#x3D;&quot;User&quot;&gt;<br>        &lt;!â€“ ç¼–å†™SQLè¯­å¥ â€“&gt;<br>        insert into smbms_user(userCode,userName,userPassword)<br>        values<br>        (#&#123;userCode&#125;,#&#123;userName&#125;,#&#123;userPassword&#125;);<br>    &lt;&#x2F;insert&gt;<br>    &lt;update id&#x3D;&quot;updateUser&quot; parameterType&#x3D;&quot;User&quot;&gt;<br>        update smbms_user<br>        set userCode&#x3D;#&#123;userCode&#125;,<br>        userName&#x3D;#&#123;userName&#125;,<br>        userPassword&#x3D;#&#123;userPassword&#125;<br>        where id &#x3D; #&#123;id&#125;;<br>    &lt;&#x2F;update&gt;<br>    &lt;delete id&#x3D;&quot;deleteUser&quot; parameterType&#x3D;&quot;User&quot;&gt;<br>        delete from smbms_user<br>        where id &#x3D; #&#123;id&#125;;<br>    &lt;&#x2F;delete&gt;<br>    &lt;!â€“  æŸ¥è¯¢æ–¹æ³•å¿…é¡»è®¾ç½®è¿”å›å€¼ç±»å‹ resultType  â€“&gt;<br>    &lt;select id&#x3D;&quot;selectCount&quot; resultType&#x3D;&quot;int&quot;&gt;<br>        select count(id) from smbms_user;<br>    &lt;&#x2F;select&gt;<br>    &lt;!â€“  é»˜è®¤æƒ…å†µä¸‹,è¡¨ä¸­çš„åˆ—åå’Œå¯¹è±¡çš„å±æ€§åä¼šè‡ªåŠ¨è¿›è¡ŒåŒåæ˜ å°„  â€“&gt;<br>    &lt;select id&#x3D;&quot;selectAll&quot; resultType&#x3D;&quot;User&quot;&gt;<br>        select * from smbms_user;<br>    &lt;&#x2F;select&gt;<br>&lt;&#x2F;mapper&gt;</code></pre></td></p>
</tr>
</tbody>
</table>
</figure>

<ol>
<li><p>å½“å®ä½“ç±»çš„å±æ€§åå’Œè¡¨ä¸­çš„åˆ—åç›¸åŒæ—¶,è‡ªåŠ¨è¿›è¡ŒåŒåæ˜ å°„</p>
<p>selectèŠ‚ç‚¹éœ€è¦è®¾ç½®è¿”å›å€¼ç±»å‹ resultType</p>
</li>
<li><p>å½“æŸ¥è¯¢å‡ºçš„åˆ—å’Œå®ä½“ç±»çš„å±æ€§ä¸ç›¸åŒæ—¶(åå­—ä¸åŒ,ç±»å‹ä¸åŒâ€“&gt;å¯¹è±¡,å¯¹è±¡é›†åˆ),éœ€è¦è‡ªå®šä¹‰resultMap</p>
<ol>
<li>ä¸»é”®åˆ—:idæ ‡ç­¾;property:å®ä½“ç±»çš„å±æ€§å;column:selectä¸å‰§ä¸­çš„åˆ—å</li>
<li>éä¸»é”®åˆ—:resultæ ‡ç­¾;property;column;</li>
</ol>
</li>
<li><p>å®ä½“ç±»:</p>
<p>â€‹ (1)Userç±»ä¸­çš„è§’è‰²: UserRoleâ€“ä¸€å¯¹ä¸€å…³ç³»</p>
<ol>
<li>SQLè¯­å¥ä¸€å®šæ˜¯å¤šè¡¨è¿æ¥æŸ¥è¯¢</li>
<li>ä¸€å¯¹ä¸€æ˜ å°„: &lt;association property&#x3D;â€userRole2â€<br>JavaType&#x3D;â€UserRoleâ€ resultMap&#x3D;â€UserRoleMapâ€ &gt;&lt;&#x2F;association&gt;</li>
<li>mybatisåœ¨æŸ¥è¯¢çš„æ—¶å€™,æŸ¥è¯¢smbms_userè¡¨çš„12æ¡è®°å½•ä¼šåˆ›å»º12ä¸ªuserå¯¹è±¡,åŒæ—¶ä¸ºæ¯ä¸ªuserå¯¹è±¡åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„UserRoleå¯¹è±¡</li>
</ol>
<p>â€‹ (2)æ”¶è´§åœ°å€: List&lt;Address&gt; ä¸€å¯¹å¤šå…³ç³»</p>
<ol>
<li>&lt;collection property&#x3D;â€addressesâ€ ofType&#x3D;â€Addressâ€<br>resultMap&#x3D;â€addressMapâ€&gt;&lt;&#x2F;collection&gt;</li>
<li>mybatisåœ¨æŸ¥è¯¢æ—¶,,æŸ¥è¯¢smbms_userè¡¨çš„12æ¡è®°å½•ä¼šåˆ›å»º12ä¸ªuserå¯¹è±¡,åŒæ—¶ä¸ºæ¯ä¸ªuserå¯¹è±¡åˆ›å»ºä¸€ä¸ªListé›†åˆ,é›†åˆé‡Œå­˜æ”¾åˆ°æ˜¯Addresså¯¹è±¡</li>
<li>å½“è¿›è¡Œå¤šè¡¨è¿æ¥æŸ¥è¯¢æ—¶,åŒååˆ—æœ€å¥½å‘½ååˆ«å,ç„¶åå†resultMapæ˜ å°„æ—¶,ä½¿ç”¨åˆ«å</li>
</ol>
</li>
<li><p>æ–¹æ³•çš„å‚æ•°æ˜¯å¤šä¸ªæ—¶çš„è§£å†³æ–¹æ¡ˆ:</p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨å®ä½“ç±»å­˜æ”¾å¤šä¸ªå‚æ•°</li>
<li>å¦‚æœå®ä½“ç±»ä¸­æ²¡æœ‰å‚æ•°çš„å±æ€§,ä½¿ç”¨Mapé›†åˆ</li>
<li>ä½¿ç”¨ @Paramæ³¨è§£ å£°æ˜å¤šä¸ªå‚æ•°</li>
</ol>
</li>
</ol>
<h2 id="MyBatisä¸‹çš„åŠ¨æ€SQLç¼–ç¨‹"><a href="#MyBatisä¸‹çš„åŠ¨æ€SQLç¼–ç¨‹" class="headerlink" title="MyBatisä¸‹çš„åŠ¨æ€SQLç¼–ç¨‹"></a>MyBatisä¸‹çš„åŠ¨æ€SQLç¼–ç¨‹</h2><p>è¡¨è¾¾å¼è·å–æ–¹æ³•çš„å‚æ•°å€¼ï¼Œè·å–å¯¹è±¡é‡Œçš„å±æ€§å€¼ #{å½¢å‚å&#x2F;å‚æ•°å¯¹è±¡çš„å±æ€§å}</p>
<p>${å½¢å‚å&#x2F;å‚æ•°å¯¹è±¡çš„å±æ€§å}</p>
<ul>
<li>åŒºåˆ«ï¼š<ol>
<li><p>#{} å…ˆ é¢„ç¼–è¯‘SQLè¯­å¥ï¼Œç„¶åå–å€¼ã€èµ‹å€¼<br>${} å…ˆå–å€¼ã€èµ‹å€¼ ç„¶åè¿›è¡ŒSQLè¯­å¥çš„ç¼–è¯‘</p>
</li>
<li><p>#{}<br>åœ¨èµ‹å€¼æ—¶ä¼šåˆ¤æ–­å€¼çš„ç±»å‹ï¼Œå¯¹å­—ç¬¦ä¸²å€¼è‡ªåŠ¨æ·»åŠ â€™â€™ï¼Œå®‰å…¨ã€é˜²æ­¢SQLæ³¨å…¥</p>
<pre><code>select * from smbms_user where userName =#&#123;userName&#125;
select * from smbms_user where userName =&#39;å¼ å&#39; $&#123;&#125; åªæ˜¯è¿›è¡Œèµ‹å€¼ï¼Œéœ€è¦è‡ªè¡ŒåŠ &#39;&#39;  ä¸å®‰å…¨
</code></pre>
</li>
</ol>
</li>
</ul>
<figure class="highlight sql">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1
2
3
4
5
6</code></pre></td>
<td class="code"><pre><code>&lt;where&gt;
  &lt;if test=&quot;userName!=null&quot;&gt;
      and username like CONCAT(&quot;%&quot;,#&#123;userName&#125;,&quot;%&quot;),
 &lt;/if&gt;
&lt;/where&gt;
-- å¦‚æœwhere,ifé‡Œé¢æœ‰å†…å®¹,æ‰ä¼šåŠ ä¸Šwhere,if;</code></pre></td>
</tr>
</tbody>
</table>
</figure>

<p>å‚æ•°ç±»å‹æ˜¯æ•°ç»„æˆ–Listé›†åˆ,ä½¿ç”¨foreachè¿­ä»£æ•°ç»„</p>
<figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1
2
3
4
5
6
7
8
9</code></pre></td>
<td class="code"><pre><code>&lt;!--  è¿­ä»£æ ‡ç­¾éå†æ•°ç»„ collectionçš„å€¼:arrayå‚æ•°æ˜¯æ•°ç»„,listå‚æ•°æ˜¯é›†åˆ  --&gt;
&lt;select id=&quot;getAllUsersBy9&quot; resultType=&quot;User&quot;&gt;
 select id,userCode,userName,userPassword,address 
    from smbms_user 
    where userRole in
    &lt;foreach collection=&quot;array&quot; item=&quot;aryRole&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot;,&quot;&gt;
       #&#123;aryRole&#125;
  &lt;/foreach&gt; 
&lt;/select&gt;</code></pre></td>
</tr>
</tbody>
</table>
</figure>

<figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1
2
3
4
5</code></pre></td>
<td class="code"><pre><code>&lt;!--é…ç½®è‡ªå®šä¹‰ä¿¡æ¯--&gt;
   &lt;settings&gt;
       &lt;!--   åœ¨æ§åˆ¶å°æ‰“å°å‡ºsql     --&gt;
       &lt;setting name=&quot;logImpl&quot;         value=&quot;STDOUT_LOGGING&quot;&gt;&lt;/setting&gt;
   &lt;/settings&gt;</code></pre></td>
</tr>
</tbody>
</table>
</figure>

<h2 id="æ‡’åŠ è½½"><a href="#æ‡’åŠ è½½" class="headerlink" title="æ‡’åŠ è½½"></a>æ‡’åŠ è½½</h2><figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1
2
3
4
5
6
7
8
9
10</code></pre></td>
<td class="code"><pre><code>&lt;settings&gt;
        &lt;!--   æ‰“å°å‡ºsql     --&gt;
        &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;&gt;&lt;/setting&gt;

<pre><code>    &amp;lt;!--    è®¾ç½®å…è®¸å»¶è¿ŸåŠ è½½    --&amp;gt;
    &amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;&amp;gt;&amp;lt;/setting&amp;gt;
    &amp;lt;!--    true:å…è®¸
            false:é»˜è®¤å€¼,ä¸è¿›è¡Œæ‡’åŠ è½½--&amp;gt;
    &amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;&amp;gt;&amp;lt;/setting&amp;gt;
&amp;lt;/settings&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
</code></pre>
</tr>
</tbody>
</table>
</figure>

<p>éœ€è¦å¯¼åŒ…</p>
<h2 id="mybatisçš„ç¼“å­˜æœºåˆ¶"><a href="#mybatisçš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="mybatisçš„ç¼“å­˜æœºåˆ¶"></a>mybatisçš„ç¼“å­˜æœºåˆ¶</h2><ul>
<li>ç‰¹ç‚¹:<ul>
<li>æé«˜äº†åº”ç”¨çš„æ•ˆç‡</li>
<li>ç¼“å­˜çš„æ•°æ®å®¹æ˜“è¿‡æ—¶</li>
</ul>
</li>
<li>åœºåˆ:<ul>
<li>æ•°æ®é‡è¾ƒå¤§</li>
<li>ç¼“å­˜ä¸­æ•°æ®çš„æ›´æ–°é—®é¢˜;å¦‚:å½“æœ‰æ·»åŠ æ“ä½œæ—¶,ç¼“å­˜ä¸­çš„æ•°æ®å¤±æ•ˆ</li>
</ul>
</li>
</ul>
<p>mybatisä¸­æä¾›äº†äºŒçº§ç¼“å­˜æœºåˆ¶:</p>
<ul>
<li><p>ä¸€çº§ç¼“å­˜:session</p>
<ul>
<li>åªåœ¨ä¸€ä¸ªsqlSessionä¸­æœ‰æ•ˆ</li>
<li>å½“æäº¤äº‹åŠ¡(insert,update,delete)å,sessionä¸­ç¼“å­˜çš„æ•°æ®ä¼šæ¸…ç©º</li>
</ul>
</li>
<li><p>äºŒçº§ç¼“å­˜:</p>
<ul>
<li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨äºŒçº§ç¼“å­˜</p>
<ul>
<li><figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1</code></pre></td>
<td class="code"><pre><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</code></pre></td>
</tr>
</tbody>
</table>
</figure></li>
</ul>
</li>
<li><p>åœ¨å¯¹åº”çš„mapper.xmlæ–‡ä»¶ä¸­å¯ç”¨äºŒçº§ç¼“å­˜</p>
<ul>
<li><figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1</code></pre></td>
<td class="code"><pre><code>&lt;cache&gt;&lt;/cache&gt;</code></pre></td>
</tr>
</tbody>
</table>
</figure></li>
</ul>
</li>
<li><p>å®ä½“ç±»å®ç°å¯åºåˆ—åŒ–çš„æ¥å£</p>
</li>
<li><p>åœ¨mapperæ–‡ä»¶çš„æŸä¸ªæ–¹æ³•ä¸­å¯ä»¥è®¾ç½®ä¸ä½¿ç”¨äºŒçº§ç¼“å­˜</p>
<p>userCache&#x3D;â€falseâ€</p>
</li>
<li><p>å½“äºŒçº§ç¼“å­˜å¯åŠ¨å</p>
<ul>
<li>æ‰€æœ‰çš„selectè¯­å¥çš„æŸ¥è¯¢ç»“æœéƒ½ä¼šè¢«ç¼“å­˜</li>
<li>å½“æ‰§è¡Œäº†insert,update,deleteæ—¶,ä¼šæ¸…ç©ºå¯¹åº”çš„ç¼“å­˜</li>
<li>ç¼“å­˜ä¼šä½¿LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨)ç®—æ³•æ”¶å›æ•°æ®</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="ä½¿ç”¨æ³¨è§£å®ç°å¢åˆ æ”¹æŸ¥"><a href="#ä½¿ç”¨æ³¨è§£å®ç°å¢åˆ æ”¹æŸ¥" class="headerlink" title="ä½¿ç”¨æ³¨è§£å®ç°å¢åˆ æ”¹æŸ¥"></a>ä½¿ç”¨æ³¨è§£å®ç°å¢åˆ æ”¹æŸ¥</h2><ol>
<li><p>@select</p>
</li>
<li><p>@update</p>
</li>
<li><p>@delete</p>
</li>
<li><p>@insert</p>
</li>
<li><p>@Parameter</p>
</li>
<li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ–‡ä»¶ä½ç½®</p>
<figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1</code></pre></td>
<td class="code"><pre><code>&lt;mapper class=&quot;cn.test.dao.UserDao2&quot;/&gt;</code></pre></td>
</tr>
</tbody>
</table>
</figure></li>
</ol>
<h2 id="PageHelper"><a href="#PageHelper" class="headerlink" title="PageHelper"></a>PageHelper</h2><p>mybatisçš„åˆ†é¡µæ’ä»¶ï¼Œéœ€è¦å¯¼åŒ…ã€‚</p>
<figure class="highlight java">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</code></pre></td>
<td class="code"><pre><code>public void testPageHelper&#123;
    int pageNum=0;
    int pageSize=2;
    Map&lt;String,Object&gt; param = new HashMap&lt;&gt;();
    param.put(&quot;name&quot;,&quot;å°æ˜&quot;);
    //PageHelperå¯¹ç´§éšå®ƒä¹‹åçš„ç¬¬ä¸€æ¡è¯­å¥èµ·ä½œç”¨
    PageHelper.startPage(pageNum,pageSize,&quot;id desc&quot;);//å¼€å§‹åˆ†é¡µ
    List&lt;User&gt; groupList = sqlSession.selectList(&quot;selectAllUsers&quot;,param);
    PageInfo&lt;User&gt; pageInfo = new PageInfo&lt;&gt;(groupList,5);//é¡µç å¯¼èˆª
    System.out.println(&quot;å½“å‰é¡µç :&quot;+pageInfo.getPageNum());
    System.out.println(&quot;æ¯é¡µ:&quot;+pageInfo.getPageSize());
    System.out.println(&quot;æ€»æ•°æ®:&quot;+pageInfo.getTotal());
    System.out.println(&quot;æ€»é¡µæ•°:&quot;+pageInfo.getPages());
   System.out.println(&quot;é¡µç å¯¼èˆª:&quot;+Arrays.toString(pageInfo.getNavigatepageNums()));
&#125;</code></pre></td>
</tr>
</tbody>
</table>
</figure>

<ul>
<li><p>åœ¨ä¸€ä¸ªMapperä¸­å¼•ç”¨å¦ä¸€ä¸ªMapperçš„ResultMapï¼š</p>
<figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1</code></pre></td>
<td class="code"><pre><code>ResultMap=&#39;otherMapper.UserMap&#39;</code></pre></td>
</tr>
</tbody>
</table>
</figure>
</li>
<li><p>åœ¨ä¸€ä¸ªMapperä¸­å¼•ç”¨å¦ä¸€ä¸ªMapperçš„sqlè¯­å¥</p>
<figure class="highlight xml">
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td class="gutter"><pre><code>1
2
3
4</code></pre></td>
<td class="code"><pre><code>&lt;resultMap id=&#39;UserMap&#39; type=&#39;User&#39;&gt;
    &lt;id property=&#39;id&#39; column=&#39;id&#39;&gt;&lt;/id&gt;
    &lt;collection property=&#39;stuid&#39; select=&#39;stuMapper.getAllStu&#39; column=&#39;id&#39;&lt;/collection&gt;
&lt;/resultMap&gt;</code></pre></td>
</tr>
</tbody>
</table>
</figure>

<p>ğŸ‘†â†‘ç”¨çš„æ¯”è¾ƒå°‘</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fbread.github.io/2019/09/10/20190910_mybatis/" data-id="clwsymwfa0015dggbbfqh8tm0" data-title="MyBatis" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/09/11/20190911_BootStrap/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          BootStrap
        
      </div>
    </a>
  
  
    <a href="/2019/08/26/20190826_jquery/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">jquery</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hibernate/" rel="tag">Hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Idea/" rel="tag">Idea</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Postgres/" rel="tag">Postgres</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Quartz/" rel="tag">Quartz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thymeleaf/" rel="tag">Thymeleaf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cookie/" rel="tag">cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/session/" rel="tag">session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">æ•°æ®ç»“æ„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hibernate/" style="font-size: 10px;">Hibernate</a> <a href="/tags/Idea/" style="font-size: 10px;">Idea</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Oracle/" style="font-size: 10px;">Oracle</a> <a href="/tags/Postgres/" style="font-size: 10px;">Postgres</a> <a href="/tags/Quartz/" style="font-size: 10px;">Quartz</a> <a href="/tags/Thymeleaf/" style="font-size: 10px;">Thymeleaf</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 15px;">æ•°æ®ç»“æ„</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">ç®—æ³•</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/05/30/20240530-thymeleaf-1/">thymeleaf-1</a>
          </li>
        
          <li>
            <a href="/2024/05/29/20240529_Postgres%E5%AE%9E%E7%8E%B0on%20update%20current_timestamp/">Postgreså®ç°on update current_timestamp</a>
          </li>
        
          <li>
            <a href="/2024/05/28/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2019/10/31/20191031_hibernate-1/">Hibernate-1</a>
          </li>
        
          <li>
            <a href="/2019/10/31/20191031_%E4%BA%8C%E5%8F%89%E6%A0%91/">äºŒå‰æ ‘</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Ziyi Jiang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>